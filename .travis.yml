language: bash

services:
  - docker

env:
  - PHP_VERSION=5.6 VARIANT=cli
  - PHP_VERSION=5.6 VARIANT=fpm
  - PHP_VERSION=7.0 VARIANT=cli
  - PHP_VERSION=7.0 VARIANT=fpm
  - PHP_VERSION=7.1 VARIANT=cli
  - PHP_VERSION=7.1 VARIANT=fpm

before_script:
  - env | sort
  - cd "$PHP_VERSION"
  - image="thomasglachant/docker-php:${PHP_VERSION}${VARIANT:+-$VARIANT}"
  - image="${image//'/'/-}"

script:
  - docker build -t ${image} "${VARIANT:-.}"

after_script:
  - docker images